<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas
	xmlns:mx="http://www.adobe.com/2006/mxml" 
	width="100%" height="100%" updateComplete="handleUpdate()"
	verticalScrollPolicy="off" horizontalScrollPolicy="off">
	<mx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			import mx.controls.List;
			
			[Bindable]
			private var _list:List;
			
			override public function set data( value:Object ):void {
				super.data = value;
				
				if (!value) {
					return;
				}
				
				_list = owner as List;
				
				var clr:String = data.status_name == 'активен' ? 'color="#348b4e"' : data.status_name == 'неактивен' ? 'color="#FF0000"' : 'color="#0000FF"';				
				mainInfo.htmlText = '<font size="10" '+clr+'>'+data.status_name +'</font>, '+ _list.labelFunction( value );

				/*
				num
    			object_name
    			mol
    			address
    			
          'id' => '288',
          'num' => '5012',
          'object_name' => 'ХРАНИТЕЛЕН МАГАЗИН "ДОБРОТИЦА"',
          'invoice_name' => '/Добруджански/ул."Добротица" 9',
          'address' => '/Добруджански/ул."Добротица" 9',
          'mol' => NULL,
          'client_id' => '138',
          'client_name' => '"Милениум  ЕХ " ЕООД',
          'client_address' => 'гр. Шумен, "Ришки проход "26',
          'client_ein' => '127588290',
          'client_ein_dds' => 'BG127588290',
          'client_mol' => 'Милена Евген. Портарска',
    			*/
    			var secInfo:String = '';
    			switch(this.parentDocument.parent.labelField){
    				case 'object_name':
    					secInfo = 'адрес: '+data.address;
    					break;
    				default:
    					secInfo = 'име: '+data.object_name;
    			}
				secondInfo.text = secInfo;
			}
			
			private function handleUpdate():void
			{
				// There must be a better way to draw a line between each 
				// of the items in the list
				graphics.clear();
				graphics.lineStyle( 1, 0x858585, 0.5 );
				graphics.moveTo( -2, height + 2);
				graphics.lineTo( width, height + 2 );
			}			
			
		]]>
	</mx:Script>
	
	<mx:VBox verticalGap="-2" width="100%">
		<mx:Label id="mainInfo" fontSize="12" width="90%"/>
		<mx:Label id="secondInfo" fontSize="10" width="90%"/>	
	</mx:VBox>
		
</mx:Canvas>