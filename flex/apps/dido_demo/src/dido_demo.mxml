<?xml version="1.0" encoding="utf-8"?>
<app:FrameworkApplication xmlns:app="net.telepol.app.*" xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" xmlns:log="net.telepol.log.*" xmlns:rpc="net.telepol.rpc.*">
	<mx:Script>
		<![CDATA[
			import mx.logging.Log;
			import mx.controls.Alert;
			import mx.logging.ILogger;
			import mx.rpc.events.ResultEvent;
			import mx.rpc.events.FaultEvent;
			import net.telepol.res.Resources;
			
			
			[Bindable]
			protected var resources:Resources = Resources.instance;
			
			protected var logger:ILogger = Log.getLogger("dido_demo");
			
			
			protected function faultHandler( event:FaultEvent ) : void {
				
				Alert.show( event.fault.faultString, "Error", 4, null, null, resources.ImgLevelError);
			}
			
			protected function resultHandler( event:ResultEvent ) : void {
				Alert.show( "ResultHandler" );
			}
			
			protected function testResultHandler( event:ResultEvent ) : void {
				Alert.show( "The result is: " + event.result );
			}
			
			protected function test1Handler( event:Event ) : void {
				
				logger.info("test1Handler()");
				
				directService.test1();
			}
			
			protected function test2Handler( event:Event ) : void {
				
				logger.info("test2Handler()");
				
				amfService.test2();
			}
			
		]]>
	</mx:Script>
	
	<mx:RemoteObject id="directService" fault="faultHandler( event )" result="resultHandler( event )" showBusyCursor="true" channelSet="{afmChannelSet}" destination="api_dido_demo" source="api_dido_demo">
		<mx:method name="test1" result="testResultHandler( event )">
			<mx:arguments>
				<param1>{param1.text}</param1>
				<param2>{param2.text}</param2>
			</mx:arguments>
		</mx:method>
	</mx:RemoteObject>
	
	<mx:Panel width="100%" height="100%" horizontalAlign="center" verticalAlign="middle">
		<mx:Form width="100%" height="100%">
			<mx:FormItem label="Param 1">
				<mx:TextInput id="param1"/>
			</mx:FormItem>
			<mx:FormItem label="Param 2">
				<mx:TextInput id="param2"/>
			</mx:FormItem>
			<mx:FormItem>
				<mx:Button label="test1() - the new style" click="test1Handler( event )"/>
			</mx:FormItem>
			<mx:FormItem>
				<mx:Button label="test2() - the old style" click="test2Handler( event )"/>
			</mx:FormItem>
		</mx:Form>
	</mx:Panel>
	
</app:FrameworkApplication>
